<template>
  <div class="top-nav">
    <div class="left-top-nav">
      <svg
        width="15"
        height="14"
        viewBox="0 0 15 14"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M13.8432 12.9517L9.92368 9.00716C10.6829 8.06337 11.14 6.8641 11.14 5.55792C11.14 2.53058 8.69241 0.0673218 5.68431 0.0673218C2.67622 0.0673218 0.228638 2.53056 0.228638 5.5579C0.228638 8.58523 2.67624 11.0485 5.68434 11.0485C6.98221 11.0485 8.17386 10.5885 9.11165 9.82438L13.0311 13.7689C13.1431 13.8816 13.2901 13.9383 13.4372 13.9383C13.5842 13.9383 13.7312 13.8816 13.8432 13.7689C14.0677 13.543 14.0677 13.1777 13.8432 12.9517ZM5.68434 9.89257C3.30909 9.89257 1.37721 7.94833 1.37721 5.5579C1.37721 3.16746 3.30909 1.22322 5.68434 1.22322C8.05959 1.22322 9.99147 3.16746 9.99147 5.5579C9.99147 7.94833 8.05956 9.89257 5.68434 9.89257Z"
          fill="#7BC868"
        />
      </svg>
      <b-input class="search" v-model="search" placeholder="Pretraži"></b-input>
    </div>
    <Drawer title="Vaša košarica" :closable="true" :width="400" v-model="drawer">
      <Cart />
      <CartSummary />
    </Drawer>
    <!-- User not logged in -->
    <div v-if="!$store.state.user.status" class="right-top-nav">
      <h2 class="modal-h2" @click="modal=true">Prijava</h2>
      <Modal v-model="modal" footer-hide>
        <Login />
      </Modal>

      <svg
        width="17"
        height="17"
        viewBox="0 0 17 17"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_706_148)">
          <path
            d="M8.3989 8.24847C9.44784 8.24847 10.356 7.86986 11.0983 7.12286C11.8403 6.37598 12.2166 5.46212 12.2166 4.40637C12.2166 3.35098 11.8404 2.437 11.0982 1.68988C10.3559 0.943126 9.44772 0.564514 8.3989 0.564514C7.34984 0.564514 6.44179 0.943126 5.69965 1.69C4.95751 2.43688 4.58118 3.35086 4.58118 4.40637C4.58118 5.46212 4.95751 6.3761 5.69965 7.12298C6.44203 7.86973 7.35021 8.24847 8.3989 8.24847ZM6.35653 2.35096C6.92599 1.77787 7.594 1.4993 8.3989 1.4993C9.20369 1.4993 9.87182 1.77787 10.4414 2.35096C11.0108 2.92417 11.2878 3.59657 11.2878 4.40637C11.2878 5.21641 11.0108 5.88869 10.4414 6.4619C9.87182 7.03511 9.20369 7.31368 8.3989 7.31368C7.59424 7.31368 6.92623 7.03499 6.35653 6.4619C5.78696 5.88881 5.51003 5.21641 5.51003 4.40637C5.51003 3.59657 5.78696 2.92417 6.35653 2.35096Z"
            fill="#394241"
          />
          <path
            d="M15.0789 12.8305C15.0575 12.5197 15.0142 12.1806 14.9504 11.8226C14.8861 11.4619 14.8033 11.1209 14.7041 10.8092C14.6016 10.487 14.4624 10.1689 14.29 9.86406C14.1114 9.54764 13.9015 9.2721 13.6659 9.04538C13.4196 8.80818 13.118 8.61747 12.7692 8.47837C12.4217 8.34 12.0365 8.2699 11.6245 8.2699C11.4627 8.2699 11.3062 8.33671 11.004 8.53472C10.818 8.65678 10.6005 8.79796 10.3577 8.9541C10.15 9.08724 9.86876 9.21198 9.52133 9.32492C9.18236 9.43531 8.8382 9.49129 8.49839 9.49129C8.15882 9.49129 7.81466 9.43531 7.47545 9.32492C7.12839 9.21211 6.84698 9.08736 6.63971 8.95422C6.39918 8.79954 6.18151 8.65837 5.99274 8.5346C5.69078 8.33659 5.5343 8.26978 5.3725 8.26978C4.96037 8.26978 4.57533 8.34 4.2279 8.47849C3.87939 8.61735 3.57767 8.80806 3.3311 9.0455C3.09553 9.27235 2.88559 9.54776 2.7071 9.86406C2.53502 10.1689 2.39571 10.4869 2.29316 10.8093C2.19412 11.121 2.11128 11.4619 2.04695 11.8226C1.9831 12.1801 1.93993 12.5193 1.91852 12.8309C1.89748 13.1355 1.88684 13.4525 1.88684 13.7728C1.88684 14.6055 2.14986 15.2796 2.66853 15.7768C3.18078 16.2674 3.85847 16.5161 4.68284 16.5161H12.3149C13.139 16.5161 13.8167 16.2674 14.3291 15.7768C14.8479 15.28 15.1109 14.6056 15.1109 13.7727C15.1108 13.4513 15.1 13.1343 15.0789 12.8305ZM13.6887 15.0995C13.3502 15.4237 12.9008 15.5813 12.3148 15.5813H4.68284C4.0967 15.5813 3.64732 15.4237 3.30897 15.0996C2.97702 14.7816 2.8157 14.3475 2.8157 13.7728C2.8157 13.474 2.82549 13.1788 2.84508 12.8955C2.86419 12.6175 2.90325 12.3122 2.96117 11.9877C3.01837 11.6673 3.09117 11.3666 3.17776 11.0943C3.26084 10.8333 3.37415 10.5748 3.51467 10.3258C3.64878 10.0885 3.80308 9.88487 3.97335 9.72082C4.13261 9.56735 4.33335 9.44176 4.56989 9.34756C4.78865 9.26042 5.0345 9.21271 5.30139 9.20553C5.33392 9.22294 5.39185 9.25616 5.48569 9.31774C5.67663 9.44297 5.89672 9.58585 6.14003 9.74224C6.4143 9.91821 6.76765 10.0772 7.18982 10.2143C7.62141 10.3548 8.06159 10.4261 8.49851 10.4261C8.93543 10.4261 9.37573 10.3548 9.80708 10.2144C10.2296 10.077 10.5828 9.91821 10.8575 9.74199C11.1065 9.58183 11.3204 9.44309 11.5113 9.31774C11.6052 9.25628 11.6631 9.22294 11.6956 9.20553C11.9626 9.21271 12.2085 9.26042 12.4274 9.34756C12.6638 9.44176 12.8645 9.56747 13.0238 9.72082C13.1941 9.88475 13.3484 10.0884 13.4825 10.3259C13.6231 10.5748 13.7365 10.8334 13.8195 11.0942C13.9062 11.3668 13.9791 11.6674 14.0362 11.9876C14.094 12.3127 14.1332 12.6182 14.1523 12.8956V12.8959C14.172 13.1781 14.1819 13.4731 14.182 13.7728C14.1819 14.3476 14.0206 14.7816 13.6887 15.0995Z"
            fill="#394241"
          />
        </g>
        <defs>
          <clipPath id="clip0_706_148">
            <rect
              width="15.8504"
              height="15.9516"
              fill="white"
              transform="translate(0.58667 0.564514)"
            />
          </clipPath>
        </defs>
      </svg>

      <svg
        class="cart"
        width="27"
        height="26"
        viewBox="0 0 27 26"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        @click="drawer=true"
      >
        <path
          d="M23.629 10.175C23.3517 9.8189 22.9357 9.6146 22.4876 9.6146H18.4436L16.2506 4.47423C16.1147 4.15553 15.752 4.00988 15.4407 4.14914C15.1293 4.28832 14.9871 4.6596 15.1231 4.97835L17.1009 9.61464H9.78182L11.7597 4.97835C11.8956 4.6596 11.7535 4.28837 11.4421 4.14914C11.1308 4.00988 10.7681 4.15544 10.6321 4.47423L8.43922 9.61464H4.39516C3.94705 9.61464 3.53105 9.8189 3.25376 10.1751C2.98156 10.5247 2.88111 10.9742 2.97819 11.4084L5.13782 21.065C5.28863 21.7393 5.8713 22.2102 6.55478 22.2102H20.328C21.0115 22.2102 21.5941 21.7393 21.7449 21.065L23.9046 11.4084C24.0017 10.9742 23.9012 10.5247 23.629 10.175ZM20.328 20.9506H6.55478C6.45032 20.9506 6.35882 20.8805 6.33721 20.7838L4.17758 11.1273C4.16064 11.0515 4.18906 10.9945 4.21597 10.9601C4.24091 10.928 4.29738 10.8742 4.39516 10.8742H7.9019L7.74076 11.2519C7.6048 11.5707 7.74695 11.9419 8.05833 12.0811C8.13847 12.117 8.22197 12.134 8.3042 12.134C8.54134 12.134 8.76732 11.9928 8.8683 11.7561L9.24451 10.8743H17.6383L18.0146 11.7561C18.1155 11.9928 18.3415 12.134 18.5786 12.134C18.6608 12.134 18.7444 12.117 18.8245 12.0811C19.1359 11.942 19.2781 11.5707 19.1421 11.2519L18.9809 10.8742H22.4877C22.5855 10.8742 22.6419 10.928 22.6669 10.9601C22.6937 10.9946 22.7222 11.0516 22.7053 11.1273L20.5456 20.7839C20.524 20.8805 20.4324 20.9506 20.328 20.9506Z"
          fill="#7BC868"
        />
        <path
          d="M8.95918 13.6904C8.54663 13.6904 8.21216 14.027 8.21216 14.4422V19.9553C8.21216 20.3705 8.54663 20.7071 8.95918 20.7071C9.37174 20.7071 9.70621 20.3705 9.70621 19.9553V14.4422C9.70621 14.027 9.37179 13.6904 8.95918 13.6904Z"
          fill="#7BC868"
        />
        <path
          d="M13.4414 13.6904C13.0288 13.6904 12.6943 14.027 12.6943 14.4422V19.9553C12.6943 20.3705 13.0288 20.7071 13.4414 20.7071C13.8539 20.7071 14.1884 20.3705 14.1884 19.9553V14.4422C14.1884 14.027 13.8539 13.6904 13.4414 13.6904Z"
          fill="#7BC868"
        />
        <path
          d="M17.9235 13.6904C17.511 13.6904 17.1765 14.027 17.1765 14.4422V19.9553C17.1765 20.3705 17.511 20.7071 17.9235 20.7071C18.3361 20.7071 18.6706 20.3705 18.6706 19.9553V14.4422C18.6705 14.027 18.3361 13.6904 17.9235 13.6904Z"
          fill="#7BC868"
        />
      </svg>
      <Badge :count="cart_quantity" class-name="badge-color"></Badge>
    </div>

    <!-- User Logged in -->
    <div v-if="$store.state.user.status" class="right-top-nav">
      <h2>{{ $store.state.user.firstName }}</h2>

      <router-link to="#">
        <Dropdown class="topNavDrop" placement="bottom-start">
          <svg
            width="17"
            height="17"
            viewBox="0 0 17 17"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_706_148)">
              <path
                d="M8.3989 8.24847C9.44784 8.24847 10.356 7.86986 11.0983 7.12286C11.8403 6.37598 12.2166 5.46212 12.2166 4.40637C12.2166 3.35098 11.8404 2.437 11.0982 1.68988C10.3559 0.943126 9.44772 0.564514 8.3989 0.564514C7.34984 0.564514 6.44179 0.943126 5.69965 1.69C4.95751 2.43688 4.58118 3.35086 4.58118 4.40637C4.58118 5.46212 4.95751 6.3761 5.69965 7.12298C6.44203 7.86973 7.35021 8.24847 8.3989 8.24847ZM6.35653 2.35096C6.92599 1.77787 7.594 1.4993 8.3989 1.4993C9.20369 1.4993 9.87182 1.77787 10.4414 2.35096C11.0108 2.92417 11.2878 3.59657 11.2878 4.40637C11.2878 5.21641 11.0108 5.88869 10.4414 6.4619C9.87182 7.03511 9.20369 7.31368 8.3989 7.31368C7.59424 7.31368 6.92623 7.03499 6.35653 6.4619C5.78696 5.88881 5.51003 5.21641 5.51003 4.40637C5.51003 3.59657 5.78696 2.92417 6.35653 2.35096Z"
                fill="#394241"
              />
              <path
                d="M15.0789 12.8305C15.0575 12.5197 15.0142 12.1806 14.9504 11.8226C14.8861 11.4619 14.8033 11.1209 14.7041 10.8092C14.6016 10.487 14.4624 10.1689 14.29 9.86406C14.1114 9.54764 13.9015 9.2721 13.6659 9.04538C13.4196 8.80818 13.118 8.61747 12.7692 8.47837C12.4217 8.34 12.0365 8.2699 11.6245 8.2699C11.4627 8.2699 11.3062 8.33671 11.004 8.53472C10.818 8.65678 10.6005 8.79796 10.3577 8.9541C10.15 9.08724 9.86876 9.21198 9.52133 9.32492C9.18236 9.43531 8.8382 9.49129 8.49839 9.49129C8.15882 9.49129 7.81466 9.43531 7.47545 9.32492C7.12839 9.21211 6.84698 9.08736 6.63971 8.95422C6.39918 8.79954 6.18151 8.65837 5.99274 8.5346C5.69078 8.33659 5.5343 8.26978 5.3725 8.26978C4.96037 8.26978 4.57533 8.34 4.2279 8.47849C3.87939 8.61735 3.57767 8.80806 3.3311 9.0455C3.09553 9.27235 2.88559 9.54776 2.7071 9.86406C2.53502 10.1689 2.39571 10.4869 2.29316 10.8093C2.19412 11.121 2.11128 11.4619 2.04695 11.8226C1.9831 12.1801 1.93993 12.5193 1.91852 12.8309C1.89748 13.1355 1.88684 13.4525 1.88684 13.7728C1.88684 14.6055 2.14986 15.2796 2.66853 15.7768C3.18078 16.2674 3.85847 16.5161 4.68284 16.5161H12.3149C13.139 16.5161 13.8167 16.2674 14.3291 15.7768C14.8479 15.28 15.1109 14.6056 15.1109 13.7727C15.1108 13.4513 15.1 13.1343 15.0789 12.8305ZM13.6887 15.0995C13.3502 15.4237 12.9008 15.5813 12.3148 15.5813H4.68284C4.0967 15.5813 3.64732 15.4237 3.30897 15.0996C2.97702 14.7816 2.8157 14.3475 2.8157 13.7728C2.8157 13.474 2.82549 13.1788 2.84508 12.8955C2.86419 12.6175 2.90325 12.3122 2.96117 11.9877C3.01837 11.6673 3.09117 11.3666 3.17776 11.0943C3.26084 10.8333 3.37415 10.5748 3.51467 10.3258C3.64878 10.0885 3.80308 9.88487 3.97335 9.72082C4.13261 9.56735 4.33335 9.44176 4.56989 9.34756C4.78865 9.26042 5.0345 9.21271 5.30139 9.20553C5.33392 9.22294 5.39185 9.25616 5.48569 9.31774C5.67663 9.44297 5.89672 9.58585 6.14003 9.74224C6.4143 9.91821 6.76765 10.0772 7.18982 10.2143C7.62141 10.3548 8.06159 10.4261 8.49851 10.4261C8.93543 10.4261 9.37573 10.3548 9.80708 10.2144C10.2296 10.077 10.5828 9.91821 10.8575 9.74199C11.1065 9.58183 11.3204 9.44309 11.5113 9.31774C11.6052 9.25628 11.6631 9.22294 11.6956 9.20553C11.9626 9.21271 12.2085 9.26042 12.4274 9.34756C12.6638 9.44176 12.8645 9.56747 13.0238 9.72082C13.1941 9.88475 13.3484 10.0884 13.4825 10.3259C13.6231 10.5748 13.7365 10.8334 13.8195 11.0942C13.9062 11.3668 13.9791 11.6674 14.0362 11.9876C14.094 12.3127 14.1332 12.6182 14.1523 12.8956V12.8959C14.172 13.1781 14.1819 13.4731 14.182 13.7728C14.1819 14.3476 14.0206 14.7816 13.6887 15.0995Z"
                fill="#394241"
              />
            </g>
            <defs>
              <clipPath id="clip0_706_148">
                <rect
                  width="15.8504"
                  height="15.9516"
                  fill="white"
                  transform="translate(0.58667 0.564514)"
                />
              </clipPath>
            </defs>
          </svg>
          <Icon class="arrow-down" type="ios-arrow-down"></Icon>

          <DropdownMenu slot="list">
            <DropdownItem>
              <router-link v-bind:to="'/user/' +this.$store.state.user.id + '/products'">
                <h3>Moji proizvodi</h3>
              </router-link>
            </DropdownItem>
            <DropdownItem>
              <router-link v-bind:to="'/user/' + this.$store.state.user.id + '/profile'">
                <h3>Profil</h3>
              </router-link>
            </DropdownItem>
          </DropdownMenu>
        </Dropdown>
      </router-link>
      <a href="user/logout">
        <h3>Odjava</h3>
      </a>
      <svg
        class="cart"
        width="27"
        height="26"
        viewBox="0 0 27 26"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        @click="drawer=true"
      >
        <path
          d="M23.629 10.175C23.3517 9.8189 22.9357 9.6146 22.4876 9.6146H18.4436L16.2506 4.47423C16.1147 4.15553 15.752 4.00988 15.4407 4.14914C15.1293 4.28832 14.9871 4.6596 15.1231 4.97835L17.1009 9.61464H9.78182L11.7597 4.97835C11.8956 4.6596 11.7535 4.28837 11.4421 4.14914C11.1308 4.00988 10.7681 4.15544 10.6321 4.47423L8.43922 9.61464H4.39516C3.94705 9.61464 3.53105 9.8189 3.25376 10.1751C2.98156 10.5247 2.88111 10.9742 2.97819 11.4084L5.13782 21.065C5.28863 21.7393 5.8713 22.2102 6.55478 22.2102H20.328C21.0115 22.2102 21.5941 21.7393 21.7449 21.065L23.9046 11.4084C24.0017 10.9742 23.9012 10.5247 23.629 10.175ZM20.328 20.9506H6.55478C6.45032 20.9506 6.35882 20.8805 6.33721 20.7838L4.17758 11.1273C4.16064 11.0515 4.18906 10.9945 4.21597 10.9601C4.24091 10.928 4.29738 10.8742 4.39516 10.8742H7.9019L7.74076 11.2519C7.6048 11.5707 7.74695 11.9419 8.05833 12.0811C8.13847 12.117 8.22197 12.134 8.3042 12.134C8.54134 12.134 8.76732 11.9928 8.8683 11.7561L9.24451 10.8743H17.6383L18.0146 11.7561C18.1155 11.9928 18.3415 12.134 18.5786 12.134C18.6608 12.134 18.7444 12.117 18.8245 12.0811C19.1359 11.942 19.2781 11.5707 19.1421 11.2519L18.9809 10.8742H22.4877C22.5855 10.8742 22.6419 10.928 22.6669 10.9601C22.6937 10.9946 22.7222 11.0516 22.7053 11.1273L20.5456 20.7839C20.524 20.8805 20.4324 20.9506 20.328 20.9506Z"
          fill="#7BC868"
        />
        <path
          d="M8.95918 13.6904C8.54663 13.6904 8.21216 14.027 8.21216 14.4422V19.9553C8.21216 20.3705 8.54663 20.7071 8.95918 20.7071C9.37174 20.7071 9.70621 20.3705 9.70621 19.9553V14.4422C9.70621 14.027 9.37179 13.6904 8.95918 13.6904Z"
          fill="#7BC868"
        />
        <path
          d="M13.4414 13.6904C13.0288 13.6904 12.6943 14.027 12.6943 14.4422V19.9553C12.6943 20.3705 13.0288 20.7071 13.4414 20.7071C13.8539 20.7071 14.1884 20.3705 14.1884 19.9553V14.4422C14.1884 14.027 13.8539 13.6904 13.4414 13.6904Z"
          fill="#7BC868"
        />
        <path
          d="M17.9235 13.6904C17.511 13.6904 17.1765 14.027 17.1765 14.4422V19.9553C17.1765 20.3705 17.511 20.7071 17.9235 20.7071C18.3361 20.7071 18.6706 20.3705 18.6706 19.9553V14.4422C18.6705 14.027 18.3361 13.6904 17.9235 13.6904Z"
          fill="#7BC868"
        />
      </svg>
      <Badge :count="cart_quantity" class-name="badge-color"></Badge>
    </div>
  </div>
</template>

<script>
import Login from "../components/Login";
import Cart from "../components/Cart/Cart";
import CartSummary from "../components/Cart/CartSummary";
export default {
  data() {
    return {
      search: "",
      modal: false,
      drawer: false,
      cart: this.$store.state.cart
    };
  },
  components: {
    Login,
    Cart,
    CartSummary
  },
  computed: {
    cart_quantity() {
      let items = this.$store.state.cart;
      let quantity = 0;
      for (let i = 0; i < items.length; i++) {
        quantity += items[i].quantity;
      }
      return Number(quantity);
    }
  }
};
</script>

<style lang="scss" scoped>
.top-nav {
  display: flex;
  padding: 0;
  align-items: center;
  justify-content: space-between;
  height: 50px;
  border-bottom: 1px solid #dddddd;
  h3 {
    font-size: 18px;
    margin: 0;
  }

  .left-top-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: 10px;
    .search {
      height: 45px;
      width: 400px;
      margin-left: 1rem;
    }
  }
  .right-top-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 40px;
    h2 {
      margin: 0 10px 0 0;
      font-size: 18px;
      text-align: center;
      text-decoration: none;
    }
    a {
      text-decoration: none;
      color: #394241;
    }
    svg {
      margin-left: 1rem;
    }
    .cart {
      min-width: 35px;
      height: 35px;
    }
    .modal-h2 {
      cursor: pointer;
    }
    .ivu-dropdown {
      .ivu-select-dropdown {
        color: #394241;
        padding: 0 !important;
        height: 71.2px;
      }
    }
    svg.cart {
      cursor: pointer;
    }
  }

  svg {
    min-width: 24px;
    height: 24px;
  }
  input {
    height: 50px;
    border: none;

    &:focus {
      box-shadow: none;
    }
  }
}
</style>